!function(){"use strict";function e(t,n,r){n.ns="http://www.w3.org/2000/svg";for(var o=0;o<r.length;o++){var a=r[o];a.data&&e(a.tag,a.data,a.tree)}}function t(e){return function(t,n,r){for(var o in n)o in i&&(n[i[o]]=n[o],delete n[o]);return e(t,n,r)}}function n(e){return e===m||e===y}function r(e){return A.test(e)}var o=function(t,n){var r=[];r.push.apply(r,arguments),r.shift(),r.shift();var o=r[0];return r=Array.isArray(o)||void 0===o?o:r,"svg"===t&&e(t,n,r),{tag:t,data:n||{},tree:[].concat.apply([],r)}},a=t,i={class:"className",for:"htmlFor","http-equiv":"httpEquiv"},u=a,s=0,f=1,l=2,c=3,h=4,p=5,d=6,v=7,g=8,m=9,y=10,b=11,w=12,k=function(e,t){function o(e){return"function"==typeof e?e:"string"==typeof e?e:e&&"object"==typeof e?e:a("",e)}e=u(e),t||(t={});var a=t.concat||function(e,t){return String(e)+String(t)};return function(t){function i(e){var t=[];u===v&&(u=h);for(var r=0;r<e.length;r++){var o=e.charAt(r);u===f&&"<"===o?(k.length&&t.push([f,k]),k="",u=l):">"!==o||n(u)?u===f?k+=o:u===l&&/\s/.test(o)?(t.push([l,k]),k="",u=h):u===l?k+=o:u===h&&/[\w-]/.test(o)?(u=p,k=o):u===h&&/\s/.test(o)?(k.length&&t.push([p,k]),t.push([w])):u===p&&/\s/.test(o)?(t.push([p,k]),k="",u=d):u===p&&"="===o?(t.push([p,k],[b]),k="",u=v):u===p?k+=o:u!==d&&u!==h||"="!==o?u!==d&&u!==h||/\s/.test(o)?u===v&&'"'===o?u=y:u===v&&"'"===o?u=m:u===y&&'"'===o?(t.push([g,k],[w]),k="",u=h):u===m&&"'"===o?(t.push([g,k],[w]),k="",u=h):u!==v||/\s/.test(o)?u===g&&/\s/.test(o)?(t.push([g,k],[w]),k="",u=h):u!==g&&u!==m&&u!==y||(k+=o):(u=g,r--):(t.push([w]),/[\w-]/.test(o)?(k+=o,u=p):u=h):(t.push([b]),u=v):(u===l?t.push([l,k]):u===p?t.push([p,k]):u===g&&k.length&&t.push([g,k]),t.push([c]),k="",u=f)}return u===f&&k.length?(t.push([f,k]),k=""):u===g&&k.length?(t.push([g,k]),k=""):u===y&&k.length?(t.push([g,k]),k=""):u===m&&k.length?(t.push([g,k]),k=""):u===p&&(t.push([p,k]),k=""),t}for(var u=f,k="",A=arguments.length,E=[],L=0;L<t.length;L++)if(L<A-1){var x=arguments[L+1],N=i(t[L]),S=u;S===y&&(S=g),S===m&&(S=g),S===v&&(S=g),S===h&&(S=p),N.push([s,S,x]),E.push.apply(E,N)}else E.push.apply(E,i(t[L]));for(var C=[null,{},[]],j=[[C,-1]],L=0;L<E.length;L++){var F=j[j.length-1][0],N=E[L],_=N[0];if(_===l&&/^\//.test(N[1])){var M=j[j.length-1][1];j.length>1&&(j.pop(),j[j.length-1][0][2][M]=e(F[0],F[1],F[2].length?F[2]:void 0))}else if(_===l){var O=[N[1],{},[]];F[2].push(O),j.push([O,F[2].length-1])}else if(_===p||_===s&&N[1]===p){for(var z,D="";L<E.length;L++)if(E[L][0]===p)D=a(D,E[L][1]);else{if(E[L][0]!==s||E[L][1]!==p)break;if("object"!=typeof E[L][2]||D)D=a(D,E[L][2]);else for(z in E[L][2])E[L][2].hasOwnProperty(z)&&!F[1][z]&&(F[1][z]=E[L][2][z])}E[L][0]===b&&L++;for(var P=L;L<E.length;L++)if(E[L][0]===g||E[L][0]===p)F[1][D]?F[1][D]=a(F[1][D],E[L][1]):F[1][D]=o(E[L][1]);else{if(E[L][0]!==s||E[L][1]!==g&&E[L][1]!==p){!D.length||F[1][D]||L!==P||E[L][0]!==c&&E[L][0]!==w||(F[1][D]=D.toLowerCase());break}F[1][D]?F[1][D]=a(F[1][D],E[L][2]):F[1][D]=o(E[L][2])}}else if(_===p)F[1][N[1]]=!0;else if(_===s&&N[1]===p)F[1][N[2]]=!0;else if(_===c){if(r(F[0])&&j.length){var M=j[j.length-1][1];j.pop(),j[j.length-1][0][2][M]=e(F[0],F[1],F[2].length?F[2]:void 0)}}else if(_===s&&N[1]===f)void 0===N[2]||null===N[2]?N[2]="":N[2]||(N[2]=a("",N[2])),Array.isArray(N[2][0])?F[2].push.apply(F[2],N[2]):F[2].push(N[2]);else if(_===f)F[2].push(N[1]);else if(_!==b&&_!==w)throw new Error("unhandled: "+_)}if(C[2].length>1&&/^\s*$/.test(C[2][0])&&C[2].shift(),C[2].length>2||2===C[2].length&&/\S/.test(C[2][1]))throw new Error("multiple root elements must be wrapped in an enclosing tag");return Array.isArray(C[2][0])&&"string"==typeof C[2][0][0]&&Array.isArray(C[2][0][2])&&(C[2][0]=e(C[2][0][0],C[2][0][1],C[2][0][2])),C[2][0]}},A=RegExp("^("+["area","base","basefont","bgsound","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr","animate","animateTransform","circle","cursor","desc","ellipse","feBlend","feColorMatrix","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","font-face-format","font-face-name","font-face-uri","glyph","glyphRef","hkern","image","line","missing-glyph","mpath","path","polygon","polyline","rect","set","stop","tref","use","view","vkern"].join("|")+")(?:[.#][a-zA-Z0-9-ï¿¿_:-]+)*$"),E=function(e){function t(e,t,n){h(w,p=t(e,d),n,0)}function n(e,t){for(var n in e){var o,a=r(n),i={};if(t.replace(new RegExp(a.re,"g"),function(){for(var t=1;t<arguments.length-2;t++)i[a.keys.shift()]=arguments[t];o=function(t,r){return e[n](t,r,i)}}),o)return o}return e["/"]}function r(e){var t=[],n="^"+e.replace(/\//g,"\\/").replace(/:([A-Za-z0-9_]+)/g,function(e,n){return t.push(n),"([A-Za-z0-9_]+)"})+"/?$";return{re:n,keys:t}}function o(e){return"string"===e||"number"===e||"boolean"===e}function a(e,t){setTimeout(function(){e(t)},0)}function i(e,t){var n,r={};if(o(typeof t)||Array.isArray(t))return t;for(n in e)r[n]=e[n];for(n in t)r[n]=t[n];return r}function u(e,t){return e.tag!==t.tag||typeof e!=typeof t||o(typeof e)&&e!==t}function s(e){var t;if(o(typeof e))t=document.createTextNode(e);else{t=e.data&&e.data.ns?document.createElementNS(e.data.ns,e.tag):document.createElement(e.tag);for(var n in e.data)"oncreate"===n?a(e.data[n],t):l(t,n,e.data[n]);for(var r=0;r<e.tree.length;r++)t.appendChild(s(e.tree[r]))}return t}function f(e,t,n){e.removeAttribute("className"===t?"class":t),"boolean"!=typeof n&&"true"!==n&&"false"!==n||(e[t]=!1)}function l(e,t,n,r){if("style"===t)for(var o in n)e.style[o]=n[o];else if("on"===t.substr(0,2)){var a=t.substr(2);e.removeEventListener(a,r),e.addEventListener(a,n)}else"false"===n||n===!1?(e.removeAttribute(t),e[t]=!1):(e.setAttribute(t,n),e[t]=n)}function c(e,t,n){for(var r in i(n,t)){var o=t[r],u=n[r];void 0===o?f(e,r,u):o!==u&&("onupdate"===r?a(o,e):l(e,r,o,u))}}function h(e,t,n,r){if(void 0===n)e.appendChild(s(t));else if(void 0===t){for(;r>0&&!e.childNodes[r];)r--;if(r>=0){var o=e.childNodes[r];if(n&&n.data){var i=n.data.onremove;i&&a(i,o)}e.removeChild(o)}}else if(u(t,n))e.replaceChild(s(t),e.childNodes[r]);else if(t.tag){var o=e.childNodes[r];c(o,t.data,n.data);for(var f=t.tree.length,l=n.tree.length,p=0;p<f||p<l;p++)h(o,t.tree[p],n.tree[p],p)}}var p,d={},v=e.model,g=e.update||{},m=e.effects||{},y=e.subs||{},b=i({onAction:Function.prototype,onUpdate:Function.prototype,onError:function(e){throw e}},e.hooks),w=e.root||document.body.appendChild(document.createElement("div")),k=e.view||function(){return w},A="function"==typeof k?void 0:k;A&&(k=n(A,location.pathname),d.setLocation=function(e){t(v,k=n(A,e),p),history.pushState({},"",e)},window.addEventListener("popstate",function(){t(v,k=n(A,location.pathname),p)}),window.onclick=function(e){if(!(e.metaKey||e.shiftKey||e.ctrlKey||e.altKey)){for(var t=e.target;t&&"a"!==t.localName;)t=t.parentNode;if(t&&t.host===location.host&&!t.hasAttribute("data-no-routing")){var n=""===t.hash?n:document.querySelector(t.hash);n?n.scrollIntoView(!0):(d.setLocation(t.pathname),e.preventDefault())}}});for(var E in i(g,m))!function(e){d[e]=function(n){b.onAction(e,n);var r=m[e];if(r)return r(v,d,n,b.onError);var o=g[e],a=v;t(v=i(v,o(v,n)),k,p),b.onUpdate(a,v,n)}}(E);document.addEventListener("DOMContentLoaded",function(){for(var e in y)y[e](v,d,b.onError)}),t(v,k)},L=o,x={html:k(L),app:E,h:L},N=x.app,S=x.html,C=(x.h,{add:function(e){var t=e.num;return{num:t+1}},sub:function(e){var t=e.num;return{num:t-1}}}),j={num:0},F=(function(){function e(e){this.value=e}function t(t){function n(e,t){return new Promise(function(n,o){var u={key:e,arg:t,resolve:n,reject:o,next:null};i?i=i.next=u:(a=i=u,r(e,t))})}function r(n,a){try{var i=t[n](a),u=i.value;u instanceof e?Promise.resolve(u.value).then(function(e){r("next",e)},function(e){r("throw",e)}):o(i.done?"return":"normal",i.value)}catch(e){o("throw",e)}}function o(e,t){switch(e){case"return":a.resolve({value:t,done:!0});break;case"throw":a.reject(t);break;default:a.resolve({value:t,done:!1})}a=a.next,a?r(a.key,a.arg):i=null}var a,i;this._invoke=n,"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}),_=F(['\n  <div class="counter">\n    <h1>Welcome to HyperApp!</h1>\n    <hr class="line-break" />\n    <section>\n      <button\n        class="add"\n        onclick=',"\n      >\n        +\n      </button>\n      <h1>",'</h1>\n      <button\n        class="sub"\n        onclick=',"\n        disabled=","\n      >\n        -\n      </button>\n    </section>\n  </div>\n"],['\n  <div class="counter">\n    <h1>Welcome to HyperApp!</h1>\n    <hr class="line-break" />\n    <section>\n      <button\n        class="add"\n        onclick=',"\n      >\n        +\n      </button>\n      <h1>",'</h1>\n      <button\n        class="sub"\n        onclick=',"\n        disabled=","\n      >\n        -\n      </button>\n    </section>\n  </div>\n"]),M=function(e,t){return S(_,t.add,e.num,t.sub,e.num<=0)};N({model:j,update:C,view:M})}();